---

---
______
## 1.网络
```shell
# 查看Docker内部虚拟网卡
docker exec -it 容器名 ip addr


```
### 1.1 veth-pair原理
Docker网络的核心原理，它像一根**虚拟的网线**，一头插在容器里（`eth0`），另一头插在宿主机上（`vethXXXX`），实现了容器与宿主机网络的连通。
```shell
[root@gop01 ~]# docker exec aigc-utme-uq-jp ip link show eth0
30798: eth0@if30799: <BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN> mtu 1500 qdisc noqueue state UP 
    link/ether 02:42:ac:11:00:29 brd ff:ff:ff:ff:ff:ff
[root@gop01 ~]# ip link show | grep '^30799:'
30799: vetha6556c2@if30798: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master docker0 state UP mode DEFAULT group default 
```
### 1.2容器间访问（虚拟网卡(veth) → 虚拟交换机(docker0) → 虚拟网卡(veth)）
```shell
1. 寻址阶段：发起方容器通过 ARP广播 获取目标容器的 MAC 地址，`docker0` 网桥学习并记录双方的 MAC 与端口映射关系。
2. 发送阶段：数据从发起方容器的 `eth0` 流出，通过 veth pair 这对“虚拟网线”直达宿主机的 `docker0` 网桥。 
3. 交换阶段：`docker0` 网桥作为虚拟交换机，查询其 MAC 地址转发表，将数据帧直接转发到连接目标容器的另一个 veth pair 端口。
4. 接收阶段：数据通过目标容器的 veth pair 进入其内部的 `eth0`，最终送达目标应用进程。
   
# 操作
docker run -d -P --name nginx02 --link nginx01 nginx   
```
![](../../attachments/tech-20260103194559.png)****
### 1.3自定义网络
```shell
docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet

docker network connect mynet es01

# 实战
docker network create redis --subnet 192.100.0.0/16
docker network ls
```

## 2.Dokcer compose
### 2.1
```shell
使用YAML文件来配置应用程序的服务，然后使用单个命令，根据配置启动所有服务。
```
### 2.2docker-compose.yml语法
```shell
version: '3.8'  
services:  
  jmeter01:  #服务名唯一  
    image: justb4/jmeter:latest #镜像  
    container_name: jmeter01 #容器名称  
    ports:  
      - "8081:8080" #端口映射  
    volumes:  
      - /Desktop/software/jmeter/scripts:/jmeter/scripts  
      - /Desktop/software/jmeter/results:/jmeter/results  
      - /Desktop/software/jmeter/logs:/jmeter/logs  
    networks: #服务使用哪个网络桥  
      - jmeter_networks  
    environment:  
      - JMETER_BASE_PATH=${JMETER_BASE_PATH}  
      - TIMESTAMP=${TIMESTAMP}  
      - JMX_FILE=${JMX_FILE}  
    command: #覆盖容器内部默认命令  
      -  
  jmeter02:  
    image: justb4/jmeter:latest  
    container_name: jmeter02  
    ports:  
      - "8082:8080"  
    volumes:  
      - /Desktop/software/jmeter/scripts:/jmeter/scripts  
      - /Desktop/software/jmeter/results:/jmeter/results  
      - /Desktop/software/jmeter/logs:/jmeter/logs  
    networks:  
      - jmeter_networks  
  
networks: #定义网桥名称  
  jmeter_networks:  
    driver: bridge
```

## 3.xx